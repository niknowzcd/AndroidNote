
>  为什么Java里的匿名内部类只能访问final修饰的外部变量


因为匿名内部类最终会被编译成一个单独的类,而被这个类使用的变量会以构造函数参数的形式传入该类,这个时候为了保证这个参数不被修改,所以需要定义成final类型。

> Java中的异常体系

1. Error是程序无法处理的错误,比如OutOfMemoryError,ThreadDeath等，当这些异常发生时，JVM一般选择线程终止
2. Exception是程序本身可以处理的异常，分为运行时异常和非运行时异常。运行时异常都是RunTimeException类及其子类异常，如NullPointerException、IndexOutOfBoundsException等。这些多是因为错误编码导致的。

> 类的加载过程

**比如Person person=new Person()**

1. 查找Person.class，并加载到内存中。·
1. 执行类里的静态代码块。
1. 在堆内存里开辟内存空间，并分配内存地址。
1. 在堆内存里建立对象的属性，并进行默认的初始化。
1. 对属性就行显示初始化。
1. 对对象进行构造代码块初始化。
1. 调用对象的构造函数进行初始化。
1. 将对象的地址赋值给person变量。


> Java的4种引用类型

- 强引用：代码中普遍存在的，只要强引用还存在，垃圾收集器就不会回收掉被引用的对象。
- 软引用：SoftReference，用来描述还有用但是非必须的对象，当内存不足的时候回回收这类对象。
- 弱引用：WeakReference，用来描述非必须对象，**弱引用的对象只能生存到下一次GC发生时**，当GC发生时，无论内存是否足够，都会回收该对象。
- 虚引用：PhantomReference，一个对象是否有虚引用的存在，完全不会对其生存时间产生影响，也无法通过虚引用取得一个对象的引用，它存在的唯一目的是在这个对象被回收时可以收到一个系统通知。


> Java注解的原理,注解是如何获取

注解相当于一种标记，在程序中加了注解就等于为程序打上了某种标记。程序可以利用ava的反射机制来了解你的类及各种元素上有无何种标记，针对不同的标记，就去做相 应的事件。标记可以加在包，类，字段，方法，方法的参数以及局部变量上。


> Java中的幂等性

幂等性是数学中的定义,及f(x)=f(f(x)) 当等式中的x被函数f作用一次和作用无限次，其结果是一样时，我们将这个等式称之为幂等式。

在计算机中的应用场景:**某个请求 请求一次和请求无数次其对应的结果是一样的。**

具体表现: 电商平台上的订单id就是最适合的token。当用户下单时，会经历多个环节，比如生成订单，减库存，减优惠券等等。每一个环节执行时都先检 测一下该订单id是否已经执行过这一步骤，对未执行的请求，执行操作并缓存结果，而对已经执行过的id，则直接返回之前的执行结果，不做任何操作。这样可以在最大程度上避免操作的重复执行问题，缓存起来的执行结果也能用于事务的控制等。


[参考](https://github.com/guoxiaoxing/android-interview/blob/master/doc/Java%E9%9D%A2%E8%AF%95%E9%A2%98%E9%9B%86.md)